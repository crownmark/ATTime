@page "/add-note"

@attribute [Authorize]

<RadzenRow>
    <RadzenColumn Size="12">
        <RadzenRow AlignItems="Radzen.AlignItems.Center">
            <RadzenColumn Size="2" Style="text-align: center">
                <RadzenStack AlignItems="Radzen.AlignItems.Center" JustifyContent="Radzen.JustifyContent.Center" Style="height: 65px">
                    <RadzenIcon Icon="description" IconStyle="Radzen.IconStyle.Primary" Style="width: 48px; height: 48px; font-size: 48px"></RadzenIcon>
                </RadzenStack>
            </RadzenColumn>
            <RadzenColumn Size="10">
                <RadzenRow>
                    <RadzenStack Gap="1">
                            <RadzenStack Orientation="Radzen.Orientation.Horizontal">
                    <RadzenText Text="@Ticket.item.ticketNumber" Style="font-weight: bold; color: var(--rz-primary)"/>


                            </RadzenStack>
                            <RadzenStack Orientation="Radzen.Orientation.Horizontal">
                                        <RadzenText Text="@Ticket.item.title" Style="font-weight: bold; color: var(--rz-primary)"/>


                            </RadzenStack>
                        </RadzenStack>
                </RadzenRow>
            </RadzenColumn>
        </RadzenRow>
    </RadzenColumn>
<RadzenColumn Size="12">
        <RadzenTemplateForm TItem="Server.Models.NewNote" Data="@note" Submit="@TemplateForm0Submit">
        <RadzenStack>
            <RadzenStack>
                    <RadzenFormField Text="Note Template" Variant="Variant.Outlined" Visible="true" Component="NoteTemplateId">
                        <ChildContent>
                            <RadzenDropDown TValue="int" ValueProperty="NoteTemplateId" TextProperty="Title" Data="@noteTemplates" LoadData="@noteTemplatesLoadData" Count="@noteTemplatesCount" @bind-Value="@note.NoteTemplateId" AllowFiltering="true" FilterCaseSensitivity="Radzen.FilterCaseSensitivity.CaseInsensitive" Name="NoteTemplateId" Change="@NoteTemplateIdChange" Visible="true" />
                        </ChildContent>
                        <Helper>
                            <RadzenRequiredValidator Component="NoteTemplateId" Text="Note Template is required" />
                        </Helper>
                    </RadzenFormField>
                    
                    <RadzenFormField Text="Ticket Status" Variant="Variant.Outlined">
                        <ChildContent>
                            <RadzenDropDown TValue="int?" @bind-Value="@note.TicketStatus" LoadData="@ticketEntityPicklistValueCachesLoadData" Data="@ticketEntityPicklistValueCaches" Count="@ticketEntityPicklistValueCachesCount" AllowFiltering="true" FilterCaseSensitivity="Radzen.FilterCaseSensitivity.CaseInsensitive" Name="TicketStatus" ValueProperty="ValueInt" TextProperty="Label" />

                        </ChildContent>

                    </RadzenFormField>
                    <RadzenFormField Text="Note Title" Variant="Variant.Outlined">
                        <ChildContent>
                            <RadzenTextBox style="display: block; width: 100%" @bind-Value="@(note.Title)" Name="NoteTitle" MaxLength="255" />
                        </ChildContent>
                        <Helper>
                            <RadzenRequiredValidator Component="NoteTitle" Text="NoteTitle is required" />
                        </Helper>
                    </RadzenFormField>
                    <RadzenFormField Text="Note Description" Variant="Variant.Outlined">
                        <ChildContent>
                            <RadzenTextArea @bind-Value="@note.Description" Name="Description" Rows="10"></RadzenTextArea>
                        </ChildContent>
                        <Helper>
                            <RadzenRequiredValidator Component="Description" Text="Description is required" />
                        </Helper>
                    </RadzenFormField>
                    <RadzenFormField Text="Note Type" Variant="Variant.Outlined">
                        <ChildContent>
                            <RadzenDropDown TValue="int" ValueProperty="ValueInt" TextProperty="Label" Data="@ticketNoteEntityPicklistNoteTypeValueCaches" LoadData="@ticketNoteEntityPicklistValueCachesNoteTypeLoadData" Count="@ticketNoteEntityPicklistValueNoteTypeCachesCount" @bind-Value="@note.NoteType" Name="NoteType" AllowFiltering="true" FilterCaseSensitivity="Radzen.FilterCaseSensitivity.CaseInsensitive" />

                        </ChildContent>
                        <Helper>
                            <RadzenNumericRangeValidator Text="Note Type is required" Min="1" Component="NoteType"></RadzenNumericRangeValidator>
                        </Helper>
                    </RadzenFormField>
                    <RadzenFormField Text="Publish" Variant="Variant.Outlined">
                        <ChildContent>
                            <RadzenDropDown TValue="int" ValueProperty="ValueInt" TextProperty="Label" Data="@ticketNoteEntityPicklistPublishValueCaches" LoadData="@ticketNoteEntityPicklistValueCachesPublishLoadData" Count="@ticketNoteEntityPicklistValuePublishCachesCount" Name="NotePublish" @bind-Value="@note.NotePublish" AllowFiltering="true" FilterCaseSensitivity="Radzen.FilterCaseSensitivity.CaseInsensitive" />

                        </ChildContent>
                        <Helper>
                            <RadzenNumericRangeValidator Text="Note Publish is required" Min="1" Component="NotePublish"></RadzenNumericRangeValidator>
                        </Helper>
                    </RadzenFormField>
            </RadzenStack>
            <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" JustifyContent="JustifyContent.End">
                    <RadzenButton ButtonStyle="ButtonStyle.Primary" ButtonType="ButtonType.Submit" Icon="save" Text="Save & Close" Variant="Variant.Flat" />
                    <RadzenButton ButtonStyle="ButtonStyle.Secondary" ButtonType="ButtonType.Button" Icon="save" Text="Cancel" Variant="Variant.Flat" Click="@CancelButton0Click" />

            </RadzenStack>
        </RadzenStack>
    </RadzenTemplateForm>
    </RadzenColumn>
</RadzenRow>
