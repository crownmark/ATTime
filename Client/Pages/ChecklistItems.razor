@page "/checklist-items"

@attribute [Authorize]


<RadzenRow>
    <RadzenColumn>
        <RadzenDataGrid @ref="grid0" TItem="Server.Models.TicketChecklistItemResult" Data="@TicketChecklistItemResult" LoadData="@DataGrid0LoadData" IsLoading="@gridLoading" RowSelect="@DataGrid0RowSelect" Density="Radzen.Density.Compact" Style="max-height: 300px" Responsive="true">
            <Columns>
                <RadzenDataGridColumn TItem="Server.Models.TicketChecklistItemResult" Property="isCompleted" Title="Completed?" Width="100px" Frozen="true" TextAlign="Radzen.TextAlign.Center">
                    <Template>
                        <RadzenButton IsBusy="@(context.isBusy)" ButtonStyle="Radzen.ButtonStyle.Primary" Icon="check" Click="@((args) => CompleteChecklistItemButtonClick(args, context))" Variant="Radzen.Variant.Outlined" Size="Radzen.ButtonSize.Small" @onclick:stopPropagation="true"></RadzenButton>
                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="Server.Models.TicketChecklistItemResult" Property="itemName" Title="Item" MinWidth="300px" WhiteSpace="Radzen.Blazor.WhiteSpace.Wrap">
                    <Template>
                        <RadzenStack Style="width: 100%" Orientation="Radzen.Orientation.Horizontal">
                            <RadzenIcon Icon="priority_high" IconStyle="Radzen.IconStyle.Danger" Visible="@(context.isImportant)"></RadzenIcon>
                            <RadzenText Text="@context.itemName" />
                        </RadzenStack>
                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="Server.Models.TicketChecklistItemResult" Property="knowledgebaseArticleID" Title="KB" Width="100px" Visible="false"></RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="Server.Models.TicketChecklistItemResult" Property="position" Title="Order" Width="60px"></RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="Server.Models.TicketChecklistItemResult" Frozen="true" FrozenPosition="Radzen.FrozenColumnPosition.Right" Width="50px">
                    <Template>
                        <RadzenButton ButtonStyle="Radzen.ButtonStyle.Danger" Variant="Radzen.Variant.Outlined" Icon="delete" Size="Radzen.ButtonSize.Small" IsBusy="@context.isBusy" Click="@((args) => DeleteButtonClick(args, context))" @onclick:stopPropagation="true"></RadzenButton>
                    </Template>
                </RadzenDataGridColumn>
            </Columns>
            <HeaderTemplate>
                <RadzenStack Style="width: 100%" Orientation="Radzen.Orientation.Horizontal" AlignItems="Radzen.AlignItems.Center" JustifyContent="Radzen.JustifyContent.Right">
                    <RadzenButton Icon="add" Variant="Radzen.Variant.Outlined" Size="Radzen.ButtonSize.ExtraSmall" Click="@AddChecklistItemButtonClick"></RadzenButton>
<RadzenButton Icon="refresh" Variant="Radzen.Variant.Outlined" Click="@GridRefreshButtonClick" Size="Radzen.ButtonSize.ExtraSmall"></RadzenButton>
                </RadzenStack>
            </HeaderTemplate>
        </RadzenDataGrid>
    </RadzenColumn>
</RadzenRow>
